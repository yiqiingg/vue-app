{"remainingRequest":"/Users/yiqing/Downloads/vue-test/redo-mapbox-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yiqing/Downloads/vue-test/redo-mapbox-app/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yiqing/Downloads/vue-test/redo-mapbox-app/src/App.vue","mtime":1632782812476},{"path":"/Users/yiqing/Downloads/vue-test/redo-mapbox-app/node_modules/cache-loader/dist/cjs.js","mtime":1632429635085},{"path":"/Users/yiqing/Downloads/vue-test/redo-mapbox-app/node_modules/babel-loader/lib/index.js","mtime":1632429635042},{"path":"/Users/yiqing/Downloads/vue-test/redo-mapbox-app/node_modules/cache-loader/dist/cjs.js","mtime":1632429635085},{"path":"/Users/yiqing/Downloads/vue-test/redo-mapbox-app/node_modules/vue-loader/lib/index.js","mtime":1632429636569}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmxldCB0aWxlc2V0aWQ7CmNvbnN0IE1ZX0FDQ0VTU19UT0tFTiA9CiAgJ3NrLmV5SjFJam9pZVdseGFXNW5aMmRuSWl3aVlTSTZJbU5yZEhobWEzWmlZekJyTVhReWJuUm9lbUZrT1RsaE1XNGlmUS5GZTBYaHZZS3NjNUE5TW1FOHhEN09RJzsKY29uc3QgbWJ4VXBsb2FkcyA9IHJlcXVpcmUoJ0BtYXBib3gvbWFwYm94LXNkay9zZXJ2aWNlcy91cGxvYWRzJyk7CmNvbnN0IG1ieENsaWVudCA9IHJlcXVpcmUoJ0BtYXBib3gvbWFwYm94LXNkaycpOwpjb25zdCBiYXNlQ2xpZW50ID0gbWJ4Q2xpZW50KHsgYWNjZXNzVG9rZW46IE1ZX0FDQ0VTU19UT0tFTiB9KTsKY29uc3QgdXBsb2Fkc0NsaWVudCA9IG1ieFVwbG9hZHMoYmFzZUNsaWVudCk7Ci8vIGxldCB1cGxvYWRJZDsKaW1wb3J0IG1hcGJveGdsIGZyb20gJ21hcGJveC1nbCc7CmNvbnN0IEFXUyA9IHJlcXVpcmUoJ2F3cy1zZGsnKTsKbWFwYm94Z2wuYWNjZXNzVG9rZW4gPQogICdway5leUoxSWpvaWVXbHhhVzVuWjJkbklpd2lZU0k2SW1OcmRIa3dNMncxY1RKNWRXZ3lkbkJ0ZFd4NE1YRmxOM0VpZlEuV29TejJabi1oN1NrZERtb3V4QzBYUSc7CmltcG9ydCBTaGFwZWZpbGVUYWJsZSBmcm9tICdAL2NvbXBvbmVudHMvU2hhcGVmaWxlVGFibGUudnVlJzsKaW1wb3J0IFNoYXBlZmlsZUZvcm0gZnJvbSAnQC9jb21wb25lbnRzL1NoYXBlZmlsZUZvcm0udnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdhcHAnLAogIGNvbXBvbmVudHM6IHsKICAgIFNoYXBlZmlsZUZvcm0sCiAgICBTaGFwZWZpbGVUYWJsZSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaGFwZWZpbGU6IFtdLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGNyZWF0ZU1hcHMobmV3U2hhcGVmaWxlSWQpIHsKICAgICAgY29uc29sZS5sb2cobmV3U2hhcGVmaWxlSWQpOwogICAgICBjb25zdCBtYXAgPSBuZXcgbWFwYm94Z2wuTWFwKHsKICAgICAgICBjb250YWluZXI6ICdtYXAtY29tcG9uZW50JywgLy8gY29udGFpbmVyIElECiAgICAgICAgc3R5bGU6ICdtYXBib3g6Ly9zdHlsZXMvbWFwYm94L3N0cmVldHMtdjExJywgLy8gc3R5bGUgVVJMCiAgICAgICAgY2VudGVyOiBbLTEyMi4yNzI3ODEsIDM3Ljg3MTY2Nl0sIC8vIHN0YXJ0aW5nIHBvc2l0aW9uIFtsbmcsIGxhdF0KICAgICAgICB6b29tOiAxNSwgLy8gc3RhcnRpbmcgem9vbQogICAgICB9KTsKICAgICAgbWFwLm9uKCdsb2FkJywgKCkgPT4gewogICAgICAgIG1hcC5hZGRTb3VyY2UoJ3BhcmtzJywgewogICAgICAgICAgdHlwZTogJ3ZlY3RvcicsCiAgICAgICAgICB1cmw6IGBtYXBib3g6Ly95aXFpbmdnZ2cubXlUaWxlc2V0MmAsCiAgICAgICAgfSk7CiAgICAgICAgbWFwLmFkZExheWVyKHsKICAgICAgICAgIGlkOiAncGFya3MnLAogICAgICAgICAgdHlwZTogJ2xpbmUnLAogICAgICAgICAgc291cmNlOiAncGFya3MnLAogICAgICAgICAgJ3NvdXJjZS1sYXllcic6IGBKTUxRIFVQTE9BRDFgLAogICAgICAgICAgbGF5b3V0OiB7CiAgICAgICAgICAgIC8vIE1ha2UgdGhlIGxheWVyIHZpc2libGUgYnkgZGVmYXVsdC4KICAgICAgICAgICAgdmlzaWJpbGl0eTogJ3Zpc2libGUnLAogICAgICAgICAgICAnbGluZS1qb2luJzogJ3JvdW5kJywKICAgICAgICAgICAgJ2xpbmUtY2FwJzogJ3JvdW5kJywKICAgICAgICAgIH0sCiAgICAgICAgICBwYWludDogewogICAgICAgICAgICAnbGluZS1jb2xvcic6ICcjODc3YjU5JywKICAgICAgICAgICAgJ2xpbmUtd2lkdGgnOiAyMCwKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGFkZFNoYXBlZmlsZShuZXdTaGFwZWZpbGUpIHsKICAgICAgLy9hZGQgc2hhcGVmaWxlIHRvIGFycmF5IG9mIHNoYXBlZmlsZQogICAgICBjb25zdCBpZCA9IHRoaXMuc2hhcGVmaWxlLmxlbmd0aDsKICAgICAgbmV3U2hhcGVmaWxlLmlkID0gaWQ7CiAgICAgIHRoaXMuc2hhcGVmaWxlID0gWy4uLnRoaXMuc2hhcGVmaWxlLCBuZXdTaGFwZWZpbGVdOwogICAgICBjb25zb2xlLmxvZyhuZXdTaGFwZWZpbGUsIHRoaXMuc2hhcGVmaWxlKTsKICAgICAgY29uc29sZS5sb2coJ3N0YXJ0aW5nIHVwbG9hZC4uLicpOwogICAgICBjb25zdCBnZXRDcmVkZW50aWFscyA9ICgpID0+IHsKICAgICAgICByZXR1cm4gdXBsb2Fkc0NsaWVudAogICAgICAgICAgLmNyZWF0ZVVwbG9hZENyZWRlbnRpYWxzKCkKICAgICAgICAgIC5zZW5kKCkKICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuYm9keSk7CiAgICAgIH07CiAgICAgIGNvbnN0IHB1dEZpbGVPblMzID0gKGNyZWRlbnRpYWxzKSA9PiB7CiAgICAgICAgY29uc3QgczMgPSBuZXcgQVdTLlMzKHsKICAgICAgICAgIGFjY2Vzc0tleUlkOiBjcmVkZW50aWFscy5hY2Nlc3NLZXlJZCwKICAgICAgICAgIHNlY3JldEFjY2Vzc0tleTogY3JlZGVudGlhbHMuc2VjcmV0QWNjZXNzS2V5LAogICAgICAgICAgc2Vzc2lvblRva2VuOiBjcmVkZW50aWFscy5zZXNzaW9uVG9rZW4sCiAgICAgICAgICByZWdpb246ICd1cy1lYXN0LTEnLAogICAgICAgIH0pOwogICAgICAgIHJldHVybiBzMwogICAgICAgICAgLnB1dE9iamVjdCh7CiAgICAgICAgICAgIEJ1Y2tldDogY3JlZGVudGlhbHMuYnVja2V0LAogICAgICAgICAgICBLZXk6IGNyZWRlbnRpYWxzLmtleSwKICAgICAgICAgICAgQm9keTogdGhpcy5zZWxlY3RlZEZpbGUsCiAgICAgICAgICB9KQogICAgICAgICAgLnByb21pc2UoKTsKICAgICAgfTsKICAgICAgY29uc3QgY3JlZGVudGlhbHMgPSBhd2FpdCBnZXRDcmVkZW50aWFscygpOwogICAgICBwdXRGaWxlT25TMyhjcmVkZW50aWFscyk7CiAgICAgIGNvbnN0IG15VXNlcm5hbWUgPSAneWlxaW5nZ2dnJzsKICAgICAgY29uc3QgbXlUaWxlc2V0ID0gYG15VGlsZXNldDBgOwogICAgICBjb25zb2xlLmxvZyhjcmVkZW50aWFscyk7CiAgICAgIHVwbG9hZHNDbGllbnQKICAgICAgICAuY3JlYXRlVXBsb2FkKHsKICAgICAgICAgIHRpbGVzZXQ6IGAke215VXNlcm5hbWV9LiR7bXlUaWxlc2V0fWAsCiAgICAgICAgICB1cmw6CiAgICAgICAgICAgICdodHRwczovL3RpbGVzdHJlYW0tdGlsZXNldHMtcHJvZHVjdGlvbi5zMy5hbWF6b25hd3MuY29tL2Y5L19wZW5kaW5nL29qZHhiN3R5a3A4MngxczNuY2VxeXh0a2MveWlxaW5nZ2dnJywKICAgICAgICAgIG5hbWU6IGBVUExPQUQwYCwKICAgICAgICB9KQogICAgICAgIC5zZW5kKCkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGNvbnN0IHVwbG9hZCA9IHJlc3BvbnNlLmJvZHk7CiAgICAgICAgICBjb25zb2xlLmxvZyh1cGxvYWQsIHVwbG9hZC50aWxlc2V0KTsKICAgICAgICAgIHRpbGVzZXRpZCA9IHVwbG9hZC50aWxlc2V0OwogICAgICAgICAgdGhpcy5zaGFwZWZpbGVbaWRdLnVwbG9hZElkID0gdXBsb2FkLmlkOwogICAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZygnZG9uZScsIHRoaXMuc2hhcGVmaWxlKTsKCiAgICAgIC8vIGF3YWl0IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAvLyAgIHRoaXMuY3JlYXRlTWFwcyhuZXdTaGFwZWZpbGUuaWQpOwogICAgICAvLyB9LCAxMDAwMCk7CiAgICAgIC8vIGNvbnN0IG1hcCA9IG5ldyBtYXBib3hnbC5NYXAoewogICAgICAvLyAgIGNvbnRhaW5lcjogJ21hcC1jb21wb25lbnQnLCAvLyBjb250YWluZXIgSUQKICAgICAgLy8gICBzdHlsZTogJ21hcGJveDovL3N0eWxlcy9tYXBib3gvc3RyZWV0cy12MTEnLCAvLyBzdHlsZSBVUkwKICAgICAgLy8gICBjZW50ZXI6IFstMTIyLjI3Mjc4MSwgMzcuODcxNjY2XSwgLy8gc3RhcnRpbmcgcG9zaXRpb24gW2xuZywgbGF0XQogICAgICAvLyAgIHpvb206IDE1LCAvLyBzdGFydGluZyB6b29tCiAgICAgIC8vIH0pOwogICAgICBjb25zb2xlLmxvZyh0aWxlc2V0aWQpOwogICAgICAvLyBtYXAub24oJ2xvYWQnLCAoKSA9PiB7CiAgICAgIC8vICAgbWFwLmFkZFNvdXJjZSgncGFya3MnLCB7CiAgICAgIC8vICAgICB0eXBlOiAndmVjdG9yJywKICAgICAgLy8gICAgIHVybDogYG1hcGJveDovL3lpcWluZ2dnZy5teVRpbGVzZXQ1YCwKICAgICAgLy8gICB9KTsKICAgICAgLy8gICBtYXAuYWRkTGF5ZXIoewogICAgICAvLyAgICAgaWQ6ICdwYXJrcycsCiAgICAgIC8vICAgICB0eXBlOiAnbGluZScsCiAgICAgIC8vICAgICBzb3VyY2U6ICdwYXJrcycsCiAgICAgIC8vICAgICAnc291cmNlLWxheWVyJzogJ1VQTE9BRDUnLAogICAgICAvLyAgICAgbGF5b3V0OiB7CiAgICAgIC8vICAgICAgIC8vIE1ha2UgdGhlIGxheWVyIHZpc2libGUgYnkgZGVmYXVsdC4KICAgICAgLy8gICAgICAgdmlzaWJpbGl0eTogJ3Zpc2libGUnLAogICAgICAvLyAgICAgICAnbGluZS1qb2luJzogJ3JvdW5kJywKICAgICAgLy8gICAgICAgJ2xpbmUtY2FwJzogJ3JvdW5kJywKICAgICAgLy8gICAgIH0sCiAgICAgIC8vICAgICBwYWludDogewogICAgICAvLyAgICAgICAnbGluZS1jb2xvcic6ICcjODc3YjU5JywKICAgICAgLy8gICAgICAgJ2xpbmUtd2lkdGgnOiAyMCwKICAgICAgLy8gICAgIH0sCiAgICAgIC8vICAgfSk7CiAgICAgIC8vIH0pOwogICAgICAvLyBjb25zdCBtYXAgPSBuZXcgbWFwYm94Z2wuTWFwKHsKICAgICAgLy8gICBjb250YWluZXI6ICdtYXAtY29tcG9uZW50JywgLy8gY29udGFpbmVyIElECiAgICAgIC8vICAgc3R5bGU6ICdtYXBib3g6Ly9zdHlsZXMvbWFwYm94L3N0cmVldHMtdjExJywgLy8gc3R5bGUgVVJMCiAgICAgIC8vICAgY2VudGVyOiBbLTEyMi4yNzI3ODEsIDM3Ljg3MTY2Nl0sIC8vIHN0YXJ0aW5nIHBvc2l0aW9uIFtsbmcsIGxhdF0KICAgICAgLy8gICB6b29tOiAxNSwgLy8gc3RhcnRpbmcgem9vbQogICAgICAvLyB9KTsKICAgICAgY29uc29sZS5sb2codGlsZXNldGlkKTsKICAgIH0sCiAgICAvLyBhc3luYyBhZGRFbXBsb3llZShlbXBsb3llZSkgewogICAgLy8gICB0cnkgewogICAgLy8gICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goCiAgICAvLyAgICAgICAnaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL3VzZXJzJywKICAgIC8vICAgICAgIHsKICAgIC8vICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAvLyAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGVtcGxveWVlKSwKICAgIC8vICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGLTgnIH0sCiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgKTsKICAgIC8vICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgLy8gICAgIHRoaXMuZW1wbG95ZWVzID0gWy4uLnRoaXMuZW1wbG95ZWVzLCBkYXRhXTsKICAgIC8vICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIC8vICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgIC8vICAgfQogICAgLy8gfSwKICAgIC8vIGFzeW5jIGdldEVtcGxveWVlcygpIHsKICAgIC8vICAgLy8gY29uc3QgbGFzdElkID0KICAgIC8vICAgLy8gICB0aGlzLmVtcGxveWVlcy5sZW5ndGggPiAwCiAgICAvLyAgIC8vICAgICA/IHRoaXMuZW1wbG95ZWVzW3RoaXMuZW1wbG95ZWVzLmxlbmd0aCAtIDFdLmlkCiAgICAvLyAgIC8vICAgICA6IDA7CiAgICAvLyAgIC8vIGNvbnN0IGlkID0gbGFzdElkICsgMTsKICAgIC8vICAgLy8gY29uc3QgbmV3RW1wbG95ZWUgPSB7IC4uLmVtcGxveWVlLCBpZCB9OwogICAgLy8gICAvLyB0aGlzLmVtcGxveWVlcyA9IFsuLi50aGlzLmVtcGxveWVlcywgbmV3RW1wbG95ZWVdOwogICAgLy8gICB0cnkgewogICAgLy8gICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goCiAgICAvLyAgICAgICAnaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL3VzZXJzJwogICAgLy8gICAgICk7CiAgICAvLyAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgIC8vICAgICB0aGlzLmVtcGxveWVlcyA9IGRhdGE7CiAgICAvLyAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAvLyAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAvLyAgIH0KICAgIC8vIH0sCiAgICAvLyBkZWxldGVFbXBsb3llZShpZCkgewogICAgLy8gICB0aGlzLmVtcGxveWVlcyA9IHRoaXMuZW1wbG95ZWVzLmZpbHRlcigKICAgIC8vICAgICBlbXBsb3llZSA9PiBlbXBsb3llZS5pZCAhPT0gaWQKICAgIC8vICAgKQogICAgLy8gfSwKICAgIC8vIGFzeW5jIGRlbGV0ZUVtcGxveWVlKGlkKSB7CiAgICAvLyAgIHRyeSB7CiAgICAvLyAgICAgYXdhaXQgZmV0Y2goYGh0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS91c2Vycy8ke2lkfWAsIHsKICAgIC8vICAgICAgIG1ldGhvZDogJ0RFTEVURScsCiAgICAvLyAgICAgfSk7CiAgICAvLyAgICAgdGhpcy5lbXBsb3llZXMgPSB0aGlzLmVtcGxveWVlcy5maWx0ZXIoCiAgICAvLyAgICAgICAoZW1wbG95ZWUpID0+IGVtcGxveWVlLmlkICE9PSBpZAogICAgLy8gICAgICk7CiAgICAvLyAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAvLyAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAvLyAgIH0KICAgIC8vIH0sCiAgICAvLyBhc3luYyBlZGl0RW1wbG95ZWUoaWQsIHVwZGF0ZWRFbXBsb3llZSkgewogICAgLy8gICAvLyB0aGlzLmVtcGxveWVlcyA9IHRoaXMuZW1wbG95ZWVzLm1hcChlbXBsb3llZSA9PgogICAgLy8gICAvLyAgIGVtcGxveWVlLmlkID09PSBpZD8gdXBkYXRlZEVtcGxveWVlIDogZW1wbG95ZWUKICAgIC8vICAgLy8gKQogICAgLy8gICB0cnkgewogICAgLy8gICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goCiAgICAvLyAgICAgICBgaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL3VzZXJzLyR7aWR9YCwKICAgIC8vICAgICAgIHsKICAgIC8vICAgICAgICAgbWV0aG9kOiAnUFVUJywKICAgIC8vICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXBkYXRlZEVtcGxveWVlKSwKICAgIC8vICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGLTgnIH0sCiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgKTsKICAgIC8vICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgLy8gICAgIHRoaXMuZW1wbG95ZWVzID0gdGhpcy5lbXBsb3llZXMubWFwKChlbXBsb3llZSkgPT4KICAgIC8vICAgICAgIGVtcGxveWVlLmlkID09PSBpZCA/IGRhdGEgOiBlbXBsb3llZQogICAgLy8gICAgICk7CiAgICAvLyAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAvLyAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAvLyAgIH0KICAgIC8vIH0sCiAgfSwKfTsK"},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\" class=\"small-container\">\n    <h1>Visualize a Shapefile from Berkeley</h1>\n\n    <shapefile-form @add:shapefile=\"addShapefile\" />\n    <div id=\"map-component\" />\n    <shapefile-table :shapefile=\"shapefile\" />\n  </div>\n</template>\n\n<script>\nlet tilesetid;\nconst MY_ACCESS_TOKEN =\n  'sk.eyJ1IjoieWlxaW5nZ2dnIiwiYSI6ImNrdHhma3ZiYzBrMXQybnRoemFkOTlhMW4ifQ.Fe0XhvYKsc5A9MmE8xD7OQ';\nconst mbxUploads = require('@mapbox/mapbox-sdk/services/uploads');\nconst mbxClient = require('@mapbox/mapbox-sdk');\nconst baseClient = mbxClient({ accessToken: MY_ACCESS_TOKEN });\nconst uploadsClient = mbxUploads(baseClient);\n// let uploadId;\nimport mapboxgl from 'mapbox-gl';\nconst AWS = require('aws-sdk');\nmapboxgl.accessToken =\n  'pk.eyJ1IjoieWlxaW5nZ2dnIiwiYSI6ImNrdHkwM2w1cTJ5dWgydnBtdWx4MXFlN3EifQ.WoSz2Zn-h7SkdDmouxC0XQ';\nimport ShapefileTable from '@/components/ShapefileTable.vue';\nimport ShapefileForm from '@/components/ShapefileForm.vue';\nexport default {\n  name: 'app',\n  components: {\n    ShapefileForm,\n    ShapefileTable,\n  },\n  data() {\n    return {\n      shapefile: [],\n    };\n  },\n  methods: {\n    async createMaps(newShapefileId) {\n      console.log(newShapefileId);\n      const map = new mapboxgl.Map({\n        container: 'map-component', // container ID\n        style: 'mapbox://styles/mapbox/streets-v11', // style URL\n        center: [-122.272781, 37.871666], // starting position [lng, lat]\n        zoom: 15, // starting zoom\n      });\n      map.on('load', () => {\n        map.addSource('parks', {\n          type: 'vector',\n          url: `mapbox://yiqingggg.myTileset2`,\n        });\n        map.addLayer({\n          id: 'parks',\n          type: 'line',\n          source: 'parks',\n          'source-layer': `JMLQ UPLOAD1`,\n          layout: {\n            // Make the layer visible by default.\n            visibility: 'visible',\n            'line-join': 'round',\n            'line-cap': 'round',\n          },\n          paint: {\n            'line-color': '#877b59',\n            'line-width': 20,\n          },\n        });\n      });\n    },\n    async addShapefile(newShapefile) {\n      //add shapefile to array of shapefile\n      const id = this.shapefile.length;\n      newShapefile.id = id;\n      this.shapefile = [...this.shapefile, newShapefile];\n      console.log(newShapefile, this.shapefile);\n      console.log('starting upload...');\n      const getCredentials = () => {\n        return uploadsClient\n          .createUploadCredentials()\n          .send()\n          .then((response) => response.body);\n      };\n      const putFileOnS3 = (credentials) => {\n        const s3 = new AWS.S3({\n          accessKeyId: credentials.accessKeyId,\n          secretAccessKey: credentials.secretAccessKey,\n          sessionToken: credentials.sessionToken,\n          region: 'us-east-1',\n        });\n        return s3\n          .putObject({\n            Bucket: credentials.bucket,\n            Key: credentials.key,\n            Body: this.selectedFile,\n          })\n          .promise();\n      };\n      const credentials = await getCredentials();\n      putFileOnS3(credentials);\n      const myUsername = 'yiqingggg';\n      const myTileset = `myTileset0`;\n      console.log(credentials);\n      uploadsClient\n        .createUpload({\n          tileset: `${myUsername}.${myTileset}`,\n          url:\n            'https://tilestream-tilesets-production.s3.amazonaws.com/f9/_pending/ojdxb7tykp82x1s3nceqyxtkc/yiqingggg',\n          name: `UPLOAD0`,\n        })\n        .send()\n        .then((response) => {\n          const upload = response.body;\n          console.log(upload, upload.tileset);\n          tilesetid = upload.tileset;\n          this.shapefile[id].uploadId = upload.id;\n        });\n      console.log('done', this.shapefile);\n\n      // await setTimeout(() => {\n      //   this.createMaps(newShapefile.id);\n      // }, 10000);\n      // const map = new mapboxgl.Map({\n      //   container: 'map-component', // container ID\n      //   style: 'mapbox://styles/mapbox/streets-v11', // style URL\n      //   center: [-122.272781, 37.871666], // starting position [lng, lat]\n      //   zoom: 15, // starting zoom\n      // });\n      console.log(tilesetid);\n      // map.on('load', () => {\n      //   map.addSource('parks', {\n      //     type: 'vector',\n      //     url: `mapbox://yiqingggg.myTileset5`,\n      //   });\n      //   map.addLayer({\n      //     id: 'parks',\n      //     type: 'line',\n      //     source: 'parks',\n      //     'source-layer': 'UPLOAD5',\n      //     layout: {\n      //       // Make the layer visible by default.\n      //       visibility: 'visible',\n      //       'line-join': 'round',\n      //       'line-cap': 'round',\n      //     },\n      //     paint: {\n      //       'line-color': '#877b59',\n      //       'line-width': 20,\n      //     },\n      //   });\n      // });\n      // const map = new mapboxgl.Map({\n      //   container: 'map-component', // container ID\n      //   style: 'mapbox://styles/mapbox/streets-v11', // style URL\n      //   center: [-122.272781, 37.871666], // starting position [lng, lat]\n      //   zoom: 15, // starting zoom\n      // });\n      console.log(tilesetid);\n    },\n    // async addEmployee(employee) {\n    //   try {\n    //     const response = await fetch(\n    //       'https://jsonplaceholder.typicode.com/users',\n    //       {\n    //         method: 'POST',\n    //         body: JSON.stringify(employee),\n    //         headers: { 'Content-type': 'application/json; charset=UTF-8' },\n    //       }\n    //     );\n    //     const data = await response.json();\n    //     this.employees = [...this.employees, data];\n    //   } catch (error) {\n    //     console.error(error);\n    //   }\n    // },\n    // async getEmployees() {\n    //   // const lastId =\n    //   //   this.employees.length > 0\n    //   //     ? this.employees[this.employees.length - 1].id\n    //   //     : 0;\n    //   // const id = lastId + 1;\n    //   // const newEmployee = { ...employee, id };\n    //   // this.employees = [...this.employees, newEmployee];\n    //   try {\n    //     const response = await fetch(\n    //       'https://jsonplaceholder.typicode.com/users'\n    //     );\n    //     const data = await response.json();\n    //     this.employees = data;\n    //   } catch (error) {\n    //     console.error(error);\n    //   }\n    // },\n    // deleteEmployee(id) {\n    //   this.employees = this.employees.filter(\n    //     employee => employee.id !== id\n    //   )\n    // },\n    // async deleteEmployee(id) {\n    //   try {\n    //     await fetch(`https://jsonplaceholder.typicode.com/users/${id}`, {\n    //       method: 'DELETE',\n    //     });\n    //     this.employees = this.employees.filter(\n    //       (employee) => employee.id !== id\n    //     );\n    //   } catch (error) {\n    //     console.error(error);\n    //   }\n    // },\n    // async editEmployee(id, updatedEmployee) {\n    //   // this.employees = this.employees.map(employee =>\n    //   //   employee.id === id? updatedEmployee : employee\n    //   // )\n    //   try {\n    //     const response = await fetch(\n    //       `https://jsonplaceholder.typicode.com/users/${id}`,\n    //       {\n    //         method: 'PUT',\n    //         body: JSON.stringify(updatedEmployee),\n    //         headers: { 'Content-type': 'application/json; charset=UTF-8' },\n    //       }\n    //     );\n    //     const data = await response.json();\n    //     this.employees = this.employees.map((employee) =>\n    //       employee.id === id ? data : employee\n    //     );\n    //   } catch (error) {\n    //     console.error(error);\n    //   }\n    // },\n  },\n};\n</script>\n\n<style>\nbutton {\n  background: #009435;\n  border: 1px solid #009435;\n}\n.small-container {\n  max-width: 680px;\n}\n</style>\n"]}]}